# 09-1. 중첩 클래스, 중첩 인터페이스

- **중첩 클래스(Nested Class)** : 클래스 안에 선언한 클래스 
    
    두 클래스의 멤버들을 서로 쉽게 접근 가능  
    외부의 불필요한 관계 클래스를 숨김 -> 코드 복잡성 줄일 수 있음

- **중첩 인터페이스(Nested Interface)** : 클래스 안에 선언한 인터페이스 

    해당 클래스와 긴밀한 관계를 맺는 구현 클래스 생성 위해
    

## 중첩 클래스 종류

1. 멤버 클래스 : 외부 클래스의 멤버로 선언된 중첩 클래스

    ### 인스턴스 멤버 클래스
    > 외부 클래스가 객체로 생성되야 사용 가능한 중첩 클래스
    
    static 키워드 없이 생성된 클래스                                                         
    인스턴스 맴버만 선언 가능 (정적 멤버는 생성 불가)
    ```java
    class 외부클래스 {
        class 중첩클래스 { ... }
    }
    ```
    
    ### 정적 멤버 클래스
    > 외부 클래스로 바로 사용 가능한 중첩 클래스                                                                                                                                                                                     
    
    static 키워드로 생성된 클래스  
    모든 종류의 멤버 선언 가능
    ```java
    class 외부클래스 {
        static class 중첩클래스 { ... }
    }
    ```                                                                                                                                                                                     
    
2. 로컬 클래스 : 외부 클래스의 메소드 내부에서 선언된 중첩 클래스
    ### 로컬 클래스
    > 속해있는 메소드가 실행되야 사용 가능한 중첩 클래스
    
    접근 제한자 선언 불가 (메소드 내부에서만 사용되므로 접근 제한 필요 없음)  
    인스턴스 멤버만 선언 가능 (정적 멤버는 생성 불가)
    ```java
    class 외부클래스 {
        void 메소드() {
            class 중첩클래스 { ... }
        }    
    }
    ```

---

### 중첩 클래스의 바이트 코드 파일

중첩 클래스도 클래스이기에 컴파일시 바이트 코드 파일(.class)이 생성

1. 멤버 클래스
```java
외부클래스명$멤버클래스명.class
```

2. 로컬 클래스
```java
외부클래스명$1로컬클래스명.class
```


## 중첩 클래스 접근 제한 

외부 클래스와 중첩 클래스 사이에서 접근할 수 있는 멤버가 일부 제한돼있음 

1. 멤버 클래스
    - 인스턴스 멤버 클래스
        
        - **외부 클래스 : 인스턴스 멤버(필드, 메소드) 에서만** 인스턴스 멤버 클래스 생성 가능
        - **인스턴스 멤버 클래스 : 외부 클래스의 모든 멤버 접근 가능**
        
    - 정적(static) 멤버 클래스
            
        - **외부 클래스 : 모든 멤버 에서** 정적 멤버 클래스 생성 가능
        - **인스턴스 멤버 클래스 : 외부 클래스의 정적 멤버(필드, 메소드) 만** 접근 가능
        
2. 로컬 클래스
    
    - **로컬 클래스 : 외부 클래스의 모든 멤버(필드, 메소드) 사용 가능**
    - 로컬 클래스가 속한 메소드의 매개변수, 로컬변수를 로컬 클래스에서 사용시 문제 발생  
    (: 메소드의 매개변수, 로컬변수는 메소드 종료시 사라지지만, 로컬 클래스는 사라지지 않음)
    - 자바 : 컴파일시 로컬 클래스 안에 사용하는 매개변수, 로컬변수를 복사해 사용 -> 이렇게 복사한 값이 메소드에서 변경된다면 둘의 값이 달라지는 문제 생김  
    -> **final 키워드가 붙은 매개변수, 로컬변수만 로컬 클래스에서 사용 가능** 하게 됨 (final = 처음 값에서 변경 불가)
    - 자바8 이후 
        
        - final 키워드 없어도 final 특성을 가짐
        
        - final 키워드 유무에 따른 복사 위치

            - final 매개변수, 로컬변수 :  **로컬 클래스 안의 매개변수와 로컬변수를 사용하는 메소드 안의 지역변수**로 복사
            - 그냥 매개변수, 로컬변수 : **로컬 클래스 안의 필드**로 추가되어 복사  

    - 결론 : **로컬 클래스에 사용된 메소드의 매개변수, 로컬변수는 final 특성을 가짐** 
    

### 중첩 클래스에서 외부 클래스 참조

중첩 클래스에서 ```this```  = 중첩 클래스 자기 자신  
중첩 클래스가 속한 외부 클래스 = ```외부클래스명.this```

```java
외부클래스명.this.필드;         // 외부 클래스의 필드 접근
외부클래스명.this.메소드();     // 외부 클래스의 메소드 접근
```


## 중첩 인터페이스 

중첩 인터페이스 = 클래스 멤버로 선언된 인터페이스  
-> 속해있는 클래스와 긴밀한 관계를 맺는 구현 클래스를 만들기 위해서 사용 (UI 프로그래밍 -> 이벤트 처리 목적으로 활용)

```java
class 클래스명 {
    interface 인터페이스명 {
    }
}
```

중첩 인터페이스는 아래 형식으로 구현
```java
class 클래스명 implements 외부클래스명.중첩인터페이스명 {     // 중첩 인터페이스 구현
}
```

외부 클래스의 매소드에서, 매개변수로 중첩 인터페이스 타입을 받는다면,  
외부 인터페이스의 구현 객체가 아닌, **외부 클래스의 중첩 인터페이스 구현 객체**만 인자값으로 넘길 수 있음 
