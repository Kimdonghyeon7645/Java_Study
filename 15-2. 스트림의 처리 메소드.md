# 15-2. 스트림의 처리 메소드

## 필터링 - distinct(), filter()

중간 처리, 요소 걸러내는 작업

- **distinct()** : 중복 제거 (Object.equals(Object)가 true면 중복으로 판단, 제거)
- **filter(predicate)** : 매개값으로 주어진 predicate(=bool을 반환하는 함수)가 true를 반환하는 요소만 걸러냄

## 매핑 - flatMap~(), map~(), as~Stream(), boxed()

중간 처리, 스트림 요소를 다른 요소로 대체하는 작업

### flatMap() 메소드

하나의 요소 -> 여러 개의 요소로 대체

- **flatMap(Function<T, Stream<R>)** : T -> Stream<R> 으로 대체
- **flatMap(~Function<~Stream)** : ~(= int, long, double) -> ~Stream 으로 대체
- **flatMapTo~(Function<T, ~Stream)** : T -> ~Stream 으로 대체

### map() 메소드

하나의 요소 -> 하나의 요소로 대체

- **map(Function<T>)** : 요소(T) -> 다른 요소로 대체
- **mapTo~(~Function)** : 요소 -> ~(= int, long, double, obj) 으로 대체 

### asDoubleStream(), asLongStream() 메소드, boxed() 메소드

- **as~Stream()** : 타입을 ~으로 변환하여 대체
- **boxed()** : 기본 타입(int, long, double)을 **박싱**(Integer, Long, Double)하여 대체

## 정렬 - sorted()

중간 처리, 요소를 정렬해서 최종 처리 순서를 변경하는 작업

- **sorted()** : 객체를 Comparable 구현 방법에 따라 정렬 (int, long, double 일 경우 오름차순으로 정렬) 
- **sorted(Comparator<T>)** : 객체를 매개값으로 주어진 Comparator 에 따라 정렬  

## 루핑 - peek(), forEach()

중간 처리(peek), 최종 처리(forEach)에서  
컬렉션을 루핑(looping, 요소 전체를 반복)하며 추가로 작업

```java
Stream
    .peek(System.out :: println)    // 최종 처리 메소드가 호출되지 않아, 스트림이 동작하지 않음
    //.sum()    과 같은 최종 단계 메소드를 호출해야 중간 처리 메소드가 정상 동작
```

## 매칭 - allMatch(), anyMatch(), noneMatch()

최종 처리, 요소들이 특정 조건에 만족하는지 판별

- **allMatch(predicate)** : 모든 요소가 predicate(=bool을 반환하는 함수)에서 true를 반환하는지 판별, bool로 반환 
- **anyMatch(predicate)** : 최소한 하나의 요소가 predicate(=bool을 반환하는 함수)에서 true를 반환하는지 판별, bool로 반환 
- **noneMatch(predicate)** : 모든 요소가 predicate(=bool을 반환하는 함수)에서 false를 반환하는지 판별, bool로 반환 

## 기본 집계 - sum(), count(), average(), max(), min()

최종 처리, 요소들을 하나의 값으로 산출하는 작업 

- **long count()** : 요소의 개수
- **Optional~ findFirst()** : 첫번째 요소
- **Optional~ max()** : 최대 요소 (인자값으로 Comparator<T>를 전달 가능)
- **Optional~ min()** : 최소 요소 (인자값으로 Comparator<T>를 전달 가능)
- **OptionalDouble average()** : 요소 평균
- **sum()** : 요소 총합 (int, long, double 반환)
 
### Optional 클래스

Optional, OptionalDouble, OptionalInt, OptionalLong 클래스 : 집계 값을 저장   
-> 집계 값이 존재하지 않을 경우 디폴트 값 설정 메소드, 집계 값 처리 메소드도 제공

반환 타입|메소드|설명
:---:|:---:|:---:
boolean|isPresent()|값이 저장되어 있는지 판별
~(= int, long, double, T)|orElse(~)|값이 저장되어 있지 않을 경우 디폴트 값(~타입) 지정
void|ifPresent(Consumer)|값이 저장되어 있을 경우 매개값으로 주어진 Consumer(=매개값을 소비하는 (반환X) 람다식)에서 처리  

### 요소가 없는 예외를 피하는 3가지 방법

1. Optional 객체를 얻어, **isPresent()** 메소드로 값이 존재하는지 확인
2. **orElse()** 메소드로 값이 없을때의 디폴트 값을 지정
3. **ifPresnet(Consumer 람다식)** 메소드로, 매개값에 람다식을 넘겨주어, 값이 있을 경우에만 값을 이용하게 함

